<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-01-01T00:00:00.000Z" agent="Claude" version="21.0.0" etag="amore-rag-ontology" type="device">
  <diagram name="AMORE System Architecture" id="amore-architecture">
    <mxGraphModel dx="1434" dy="796" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="AMORE RAG-ONTOLOGY HYBRID AGENT&#xa;시스템 아키텍처" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="600" height="50" as="geometry" />
        </mxCell>

        <!-- User Layer -->
        <mxCell id="user-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="90" width="1200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="user-label" value="사용자 인터페이스" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="210" y="95" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="cli" value="CLI&#xa;(main.py)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="115" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="dashboard" value="Dashboard HTML&#xa;(amore_unified_dashboard.html)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="115" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="chatbot-ui" value="챗봇 UI&#xa;(test_chat.html)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="115" width="140" height="45" as="geometry" />
        </mxCell>
        <mxCell id="api-client" value="외부 API 클라이언트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="115" width="140" height="45" as="geometry" />
        </mxCell>

        <!-- API Layer -->
        <mxCell id="api-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="200" width="1200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="api-label" value="API 레이어" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="210" y="205" width="100" height="20" as="geometry" />
        </mxCell>

        <mxCell id="fastapi" value="FastAPI Server&#xa;dashboard_api.py&#xa;Port: 8001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="225" width="400" height="55" as="geometry" />
        </mxCell>

        <mxCell id="api-v1" value="/api/chat&#xa;(v1 - Legacy)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="610" y="235" width="85" height="35" as="geometry" />
        </mxCell>
        <mxCell id="api-v2" value="/api/v2/chat&#xa;(통합 오케스트레이터)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="705" y="235" width="110" height="35" as="geometry" />
        </mxCell>
        <mxCell id="api-v3" value="/api/v3/chat&#xa;(Simple Chat)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="825" y="235" width="85" height="35" as="geometry" />
        </mxCell>
        <mxCell id="api-export" value="/api/export/docx&#xa;(리포트 생성)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="235" width="70" height="35" as="geometry" />
        </mxCell>

        <!-- Orchestrator Layer -->
        <mxCell id="orch-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="320" width="1200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="orch-label" value="오케스트레이터 레이어" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="210" y="325" width="150" height="20" as="geometry" />
        </mxCell>

        <mxCell id="workflow-orch" value="WorkflowOrchestrator&#xa;orchestrator.py&#xa;&#xa;Think → Act → Observe 루프&#xa;일일 배치 워크플로우" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="280" y="350" width="200" height="80" as="geometry" />
        </mxCell>

        <mxCell id="unified-orch" value="UnifiedOrchestrator&#xa;core/unified_orchestrator.py&#xa;&#xa;LLM 기반 에이전트 선택&#xa;에러 전략 (Retry/Fallback/Skip/Abort)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="600" y="350" width="250" height="80" as="geometry" />
        </mxCell>

        <mxCell id="simple-chat" value="SimpleChatService&#xa;core/simple_chat.py&#xa;&#xa;Function Calling&#xa;단순화된 구조" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="960" y="350" width="180" height="80" as="geometry" />
        </mxCell>

        <!-- Core Components -->
        <mxCell id="core-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="470" width="1200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="core-label" value="Core 모듈 (core/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="210" y="475" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="context-gatherer" value="ContextGatherer&#xa;컨텍스트 수집" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="260" y="500" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="response-pipeline" value="ResponsePipeline&#xa;응답 생성" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="390" y="500" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="tool-executor" value="ToolExecutor&#xa;도구 실행" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="520" y="500" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="cache" value="ResponseCache&#xa;응답 캐시" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="650" y="500" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="confidence" value="ConfidenceAssessor&#xa;신뢰도 평가" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="780" y="500" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="state" value="OrchestratorState&#xa;상태 관리" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="920" y="500" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="crawl-manager" value="CrawlManager&#xa;크롤링 상태" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD9;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="1050" y="500" width="110" height="50" as="geometry" />
        </mxCell>

        <!-- Agents Layer -->
        <mxCell id="agents-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="600" width="1200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="agents-label" value="에이전트 레이어 (agents/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#0277BD;" vertex="1" parent="1">
          <mxGeometry x="210" y="605" width="170" height="20" as="geometry" />
        </mxCell>

        <mxCell id="crawler-agent" value="CrawlerAgent&#xa;Amazon 크롤링" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="630" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="storage-agent" value="StorageAgent&#xa;Sheets 저장" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="630" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="metrics-agent" value="MetricsAgent&#xa;지표 계산" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="630" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="insight-agent" value="InsightAgent&#xa;인사이트 생성&#xa;(Legacy)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontStyle=0;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="630" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="hybrid-insight" value="HybridInsightAgent&#xa;Ontology+RAG+LLM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81D4FA;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="630" width="140" height="55" as="geometry" />
        </mxCell>
        <mxCell id="hybrid-chatbot" value="HybridChatbotAgent&#xa;하이브리드 챗봇" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81D4FA;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="630" width="140" height="55" as="geometry" />
        </mxCell>

        <!-- Tools Layer -->
        <mxCell id="tools-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="730" width="500" height="100" as="geometry" />
        </mxCell>
        <mxCell id="tools-label" value="도구 레이어 (tools/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="210" y="735" width="130" height="20" as="geometry" />
        </mxCell>

        <mxCell id="amazon-scraper" value="amazon_scraper.py&#xa;Playwright 크롤러" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="220" y="760" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="sheets-writer" value="sheets_writer.py&#xa;Google Sheets API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="345" y="760" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="metric-calc" value="metric_calculator.py&#xa;10개 전략 지표" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="470" y="760" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="dashboard-export" value="dashboard_exporter.py&#xa;대시보드 데이터" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="595" y="760" width="100" height="55" as="geometry" />
        </mxCell>

        <!-- RAG Layer -->
        <mxCell id="rag-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="730" width="320" height="180" as="geometry" />
        </mxCell>
        <mxCell id="rag-label" value="RAG 시스템 (rag/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#3F51B5;" vertex="1" parent="1">
          <mxGeometry x="730" y="735" width="130" height="20" as="geometry" />
        </mxCell>

        <mxCell id="rag-router" value="RAGRouter&#xa;질의 라우팅&#xa;(6가지 유형 분류)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;" vertex="1" parent="1">
          <mxGeometry x="735" y="760" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="doc-retriever" value="DocumentRetriever&#xa;MD 문서 검색" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;" vertex="1" parent="1">
          <mxGeometry x="860" y="760" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="hybrid-retriever" value="HybridRetriever&#xa;KG + RAG 통합 검색" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9FA8DA;strokeColor=#3F51B5;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="735" y="830" width="235" height="40" as="geometry" />
        </mxCell>
        <mxCell id="context-builder" value="ContextBuilder" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;" vertex="1" parent="1">
          <mxGeometry x="735" y="875" width="90" height="28" as="geometry" />
        </mxCell>
        <mxCell id="templates" value="ResponseTemplates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;" vertex="1" parent="1">
          <mxGeometry x="835" y="875" width="105" height="28" as="geometry" />
        </mxCell>

        <!-- Ontology Layer -->
        <mxCell id="onto-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="730" width="340" height="180" as="geometry" />
        </mxCell>
        <mxCell id="onto-label" value="온톨로지 시스템 (ontology/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="1070" y="735" width="180" height="20" as="geometry" />
        </mxCell>

        <mxCell id="kg" value="KnowledgeGraph&#xa;트리플 저장/쿼리&#xa;그래프 탐색(BFS/DFS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1075" y="760" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="reasoner" value="OntologyReasoner&#xa;규칙 기반 추론&#xa;Forward Chaining" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1230" y="760" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="schema" value="Schema&#xa;엔티티 정의" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="1075" y="835" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="relations" value="Relations&#xa;관계 유형" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="1165" y="835" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="business-rules" value="BusinessRules&#xa;비즈니스 규칙" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="1255" y="835" width="100" height="40" as="geometry" />
        </mxCell>

        <!-- Memory & Monitoring -->
        <mxCell id="memory-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00838F;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="860" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="memory-label" value="메모리 관리 (memory/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#00838F;" vertex="1" parent="1">
          <mxGeometry x="210" y="865" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="session" value="SessionManager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2EBF2;strokeColor=#00838F;" vertex="1" parent="1">
          <mxGeometry x="215" y="890" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="history" value="HistoryManager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2EBF2;strokeColor=#00838F;" vertex="1" parent="1">
          <mxGeometry x="215" y="925" width="95" height="25" as="geometry" />
        </mxCell>
        <mxCell id="context-mem" value="ContextManager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2EBF2;strokeColor=#00838F;" vertex="1" parent="1">
          <mxGeometry x="320" y="890" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="monitor-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF8F00;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="860" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="monitor-label" value="모니터링 (monitoring/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#FF8F00;" vertex="1" parent="1">
          <mxGeometry x="480" y="865" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="logger" value="AgentLogger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FF8F00;" vertex="1" parent="1">
          <mxGeometry x="480" y="890" width="85" height="30" as="geometry" />
        </mxCell>
        <mxCell id="tracer" value="ExecutionTracer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FF8F00;" vertex="1" parent="1">
          <mxGeometry x="575" y="890" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="quality-metrics" value="QualityMetrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FF8F00;" vertex="1" parent="1">
          <mxGeometry x="480" y="925" width="95" height="25" as="geometry" />
        </mxCell>

        <!-- LLM -->
        <mxCell id="llm" value="LLM (GPT-4.1-mini)&#xa;via LiteLLM (OpenAI API)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4A148C;strokeColor=#4A148C;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1150" y="940" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Data Storage -->
        <mxCell id="data-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="980" width="900" height="80" as="geometry" />
        </mxCell>
        <mxCell id="data-label" value="데이터 저장 (data/)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="210" y="985" width="130" height="20" as="geometry" />
        </mxCell>

        <mxCell id="data-dashboard" value="dashboard_data.json" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#CFD8DC;strokeColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="220" y="1005" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="data-kg" value="knowledge_graph.json" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#CFD8DC;strokeColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="340" y="1005" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="data-metrics" value="metrics/*.json" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#CFD8DC;strokeColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="460" y="1005" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="data-traces" value="traces/*.json" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#CFD8DC;strokeColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="580" y="1005" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="data-history" value="history/*.json" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#CFD8DC;strokeColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="700" y="1005" width="100" height="45" as="geometry" />
        </mxCell>

        <!-- External Services -->
        <mxCell id="external" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="1090" width="1200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="external-label" value="외부 서비스" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#616161;" vertex="1" parent="1">
          <mxGeometry x="210" y="1095" width="100" height="20" as="geometry" />
        </mxCell>

        <mxCell id="amazon" value="Amazon.com&#xa;(베스트셀러 페이지)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="1115" width="150" height="45" as="geometry" />
        </mxCell>
        <mxCell id="google-sheets" value="Google Sheets&#xa;(데이터 저장소)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="1115" width="150" height="45" as="geometry" />
        </mxCell>
        <mxCell id="openai" value="OpenAI API&#xa;(GPT-4.1-mini)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#000000;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="740" y="1115" width="150" height="45" as="geometry" />
        </mxCell>
        <mxCell id="md-docs" value="MD 문서 (4개)&#xa;RAG 소스" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196F3;strokeColor=#1565C0;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="1115" width="150" height="45" as="geometry" />
        </mxCell>

        <!-- Arrows - Main Flow -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="dashboard" target="fastapi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="fastapi" target="unified-orch">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="cli" target="workflow-orch">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="workflow-orch" target="crawler-agent">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="unified-orch" target="hybrid-insight">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#C62828;dashed=1;" edge="1" parent="1" source="hybrid-insight" target="kg">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#3F51B5;dashed=1;" edge="1" parent="1" source="hybrid-insight" target="hybrid-retriever">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4A148C;" edge="1" parent="1" source="unified-orch" target="llm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF9800;" edge="1" parent="1" source="amazon-scraper" target="amazon">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4CAF50;" edge="1" parent="1" source="sheets-writer" target="google-sheets">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#BDBDBD;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1420" y="90" width="160" height="200" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="범례" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1420" y="95" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="사용자 인터페이스" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="125" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="150" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="오케스트레이터" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="175" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="에이전트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="200" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend5" value="RAG" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="225" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend6" value="Ontology" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1430" y="250" width="140" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
